(this["webpackJsonpccxt-simple-client"]=this["webpackJsonpccxt-simple-client"]||[]).push([[0],{214:function(e,t,a){e.exports=a(468)},219:function(e,t,a){},221:function(e,t,a){},232:function(e,t,a){},378:function(e,t,a){},382:function(e,t,a){},387:function(e,t,a){},388:function(e,t,a){},389:function(e,t,a){},390:function(e,t,a){},410:function(e,t,a){},411:function(e,t,a){},420:function(e,t,a){},466:function(e,t,a){},467:function(e,t,a){},468:function(e,t,a){"use strict";a.r(t);var n,r,c,o,i,s,l,u=a(0),p=a.n(u),b=a(5),m=a.n(b),d=(a(219),a(15)),f=a.n(d),h=a(30),O=a(64),v=(a(221),a(20)),y=a(24),g=a(21),j=a(13),k=a(25),E=a(29),x=a(3),w=function(){function e(t,a,n){Object(v.a)(this,e),this.store=void 0,this.parent=void 0,this.store=t,t||(this.store=this),this.parent=a,this.applySnapShot(n)}return Object(E.a)(e,[{key:"getSnapShoot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,a=Object.assign({},t);return e.getStoreSnapShoot(a)}},{key:"toJSON",value:function(){var e=Object.assign({},this);return delete e.store,delete e.parent,e}},{key:"applySnapShot",value:function(e){}}],[{key:"getStoreSnapShoot",value:function(t){delete t.store,delete t.parent;for(var a=0,n=Object.keys(t);a<n.length;a++){var r=n[a];if(t.hasOwnProperty(r)){var c=t[r];c instanceof e?t[r]=c.getSnapShoot():Array.isArray(c)||Object(x.isObservableArray)(c)?(c=c.map((function(t){return t instanceof e&&(t=t.getSnapShoot()),t})),t[r]=c):c instanceof Map||Object(x.isObservableMap)(c)?function(){var a={};c.forEach((function(t,n){a[n]=t,t instanceof e&&(a[n]=t.getSnapShoot())})),t[r]=a}():"object"===typeof c&&(t[r]=e.getStoreSnapShoot(c))}}return t}}]),e}(),C=a(22),S=a(7),A=(a(51),function(e){function t(){return Object(v.a)(this,t),Object(y.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(k.a)(t,e),t}(w)),T=a(193),M=(n=function(e){function t(e,a){var n;return Object(v.a)(this,t),n=Object(y.a)(this,Object(g.a)(t).call(this,e,a)),Object(C.a)(n,"version",r,Object(j.a)(n)),n.ls=void 0,n.baseCurrencies=new Map([["USDT",{name:"USDT",precision:2,minValue:.1}],["BTC",{name:"BTC",precision:6,minValue:.001}]]),n.ls=T,n}return Object(k.a)(t,e),t}(A),r=Object(S.a)(n.prototype,"version",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),n),I=a(121),N=(c=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return a=Object(y.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r))),Object(C.a)(a,"loading",o,Object(j.a)(a)),Object(C.a)(a,"lastUpdateTime",i,Object(j.a)(a)),a}return Object(k.a)(t,e),Object(E.a)(t,[{key:"loadingStart",value:function(){this.loading=!0}},{key:"loadingEnd",value:function(){this.loading=!1,this.lastUpdateTime=new Date}},{key:"updateRes",value:function(){console.warn("need to be implemented")}}]),t}(A),o=Object(S.a)(c.prototype,"loading",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=Object(S.a)(c.prototype,"lastUpdateTime",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Date}}),c),R=a(209);!function(e){e.buy="buy",e.sell="sell",e.both="both"}(s||(s={})),function(e){e.plusTick="plusTick",e.zeroPlusTick="ZeroPlusTick",e.minusTick="minusTick",e.zeroMinusTick="ZeroMinusTick"}(l||(l={}));var B=a(23),z=a.n(B);function P(e,t){if(!(e.length<2))for(var a=e.length-1,n=0;n<a;n++){t(e[n],e[n+1])}}var L,D,G,K,U,H,V,F,q,X,_,Z,W,J,Q,$,Y,ee,te,ae,ne,re,ce,oe,ie,se,le,ue,pe,be,me,de,fe,he,Oe=function e(t,a){var n=this;Object(v.a)(this,e),this.rootKey=void 0,this.ls=void 0,this.lsGet=function(e,t){var a=n.ls.get(n.rootKey,{})[e];return void 0===a&&void 0!==t&&(a=t),a},this.lsSet=function(e,t){var a=n.ls.get(n.rootKey,{});a[e]=t,n.ls.set(n.rootKey,a)},this.lsRemove=function(e){var t=n.ls.get(n.rootKey,{});delete t[e],n.ls.set(n.rootKey,t)},this.rootKey=a,this.ls=t},ve=(L=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return a=Object(y.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r))),Object(C.a)(a,"trades",D,Object(j.a)(a)),a}return Object(k.a)(t,e),Object(E.a)(t,[{key:"updateRes",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t,a,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingStart(),t=this.market,e.next=4,this.ccxtIns.fetchTrades(t.spec.symbol);case 4:a=e.sent,Object(x.runInAction)((function(){a=z.a.orderBy(a,"timestamp",["desc"]),P(z.a.reverse(a),(function(e,t){var a=l.zeroMinusTick;t.price>e.price?a=l.plusTick:t.price<e.price?a=l.minusTick:t.price===e.price&&(a=e.tick===l.plusTick||e.tick===l.zeroPlusTick?l.zeroPlusTick:l.zeroMinusTick),t.tick=a})),n.trades=z.a.orderBy(a,"timestamp",["desc"]),n.market.lastTicker&&(n.market.lastTicker.close=n.trades[0].price)})),this.loadingEnd();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"testAddTrades",value:function(){var e=this;window.setInterval((function(){var t;(t=e.trades).unshift.apply(t,Object(R.a)(function(){for(var t=5*Math.random(),a=[],n=0;n<t;n++)a.push({timestamp:(new Date).getTime(),datetime:"2019-11-20T15:54:01.000Z",symbol:e.market.spec.symbol,id:z.a.uniqueId("tradeId_"),type:"limit",side:"sell",price:.01659,amount:1065+300*Math.random(),cost:17.66835,info:{id:169799562,price:"0.01659",amount:"1065",taker_side:"ASK",inserted_at:"2019-11-20T15:54:01Z",created_at:"2019-11-20T15:54:01Z"},tick:"plusTick"});return a}()))}),1e3)}},{key:"market",get:function(){return this.parent}},{key:"ccxtIns",get:function(){return this.parent.parent.ccxtIns}}]),t}(N),D=Object(S.a)(L.prototype,"trades",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(S.a)(L.prototype,"updateRes",[x.action],Object.getOwnPropertyDescriptor(L.prototype,"updateRes"),L.prototype),L),ye=(G=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return a=Object(y.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r))),Object(C.a)(a,"asks",K,Object(j.a)(a)),Object(C.a)(a,"bids",U,Object(j.a)(a)),a.transferToOrderBookRes=function(e){return{price:e[0],size:e[1],accumulateSize:e[1]}},a}return Object(k.a)(t,e),Object(E.a)(t,[{key:"updateRes",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t,a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingStart(),t=this.market,e.next=4,this.ccxtIns.fetchOrderBook(t.spec.symbol).then((function(e){a.bids=e.bids.map(a.transferToOrderBookRes),a.asks=e.asks.map(a.transferToOrderBookRes)}));case 4:this.loadingEnd();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"test1",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;window.setInterval((function(){e.market.orderBook.asks[0].price+=1,e.market.orderBook.asks[3].price+=1}),t)}},{key:"market",get:function(){return this.parent}},{key:"ccxtIns",get:function(){return this.parent.parent.ccxtIns}}]),t}(N),K=Object(S.a)(G.prototype,"asks",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=Object(S.a)(G.prototype,"bids",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(S.a)(G.prototype,"updateRes",[x.action],Object.getOwnPropertyDescriptor(G.prototype,"updateRes"),G.prototype),G),ge=(H=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return a=Object(y.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r))),Object(C.a)(a,"ohlcv_arr",V,Object(j.a)(a)),a}return Object(k.a)(t,e),Object(E.a)(t,[{key:"updateRes",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t,a,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingStart(),t=this.market,e.next=4,this.ccxtIns.fetchOHLCV(t.spec.symbol,"1d",null,500);case 4:a=e.sent,Object(x.runInAction)((function(){n.ohlcv_arr=a.map((function(e){return{time:e[0],open:e[1],high:e[2],close:e[3],low:e[4],volume:e[5]}}))})),this.loadingEnd();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"market",get:function(){return this.parent}},{key:"ccxtIns",get:function(){return this.parent.parent.ccxtIns}}]),t}(N),V=Object(S.a)(H.prototype,"ohlcv_arr",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(S.a)(H.prototype,"updateRes",[x.action],Object.getOwnPropertyDescriptor(H.prototype,"updateRes"),H.prototype),H),je=(F=function(e){function t(e,a,n){var r;return Object(v.a)(this,t),r=Object(y.a)(this,Object(g.a)(t).call(this,e,a)),Object(C.a)(r,"recentTrades",q,Object(j.a)(r)),Object(C.a)(r,"orderBook",X,Object(j.a)(r)),Object(C.a)(r,"candlestick",_,Object(j.a)(r)),Object(C.a)(r,"spec",Z,Object(j.a)(r)),Object(C.a)(r,"lastTicker",W,Object(j.a)(r)),r.spec=n,r.recentTrades=new ve(e,Object(j.a)(r)),r.orderBook=new ye(e,Object(j.a)(r)),r.candlestick=new ge(e,Object(j.a)(r)),r}return Object(k.a)(t,e),Object(E.a)(t,[{key:"updateRes",value:function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingStart(),e.next=3,this.recentTrades.updateRes();case 3:return e.next=5,this.orderBook.updateRes();case 5:this.loadingEnd();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"lastTrade",get:function(){return this.recentTrades.trades[0]}},{key:"lastPrice",get:function(){return this.lastTicker?this.lastTicker.close:0}}]),t}(N),q=Object(S.a)(F.prototype,"recentTrades",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=Object(S.a)(F.prototype,"orderBook",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=Object(S.a)(F.prototype,"candlestick",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=Object(S.a)(F.prototype,"spec",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=Object(S.a)(F.prototype,"lastTicker",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(S.a)(F.prototype,"updateRes",[x.action],Object.getOwnPropertyDescriptor(F.prototype,"updateRes"),F.prototype),Object(S.a)(F.prototype,"lastTrade",[x.computed],Object.getOwnPropertyDescriptor(F.prototype,"lastTrade"),F.prototype),Object(S.a)(F.prototype,"lastPrice",[x.computed],Object.getOwnPropertyDescriptor(F.prototype,"lastPrice"),F.prototype),F),ke=(J=function(e){function t(e,a){var n;return Object(v.a)(this,t),(n=Object(y.a)(this,Object(g.a)(t).call(this,e,a))).marketsMap=x.observable.map({},{name:"marketsMap"}),Object(C.a)(n,"ccxtIns",Q,Object(j.a)(n)),Object(C.a)(n,"exchange",$,Object(j.a)(n)),Object(C.a)(n,"createCCXTOption",Y,Object(j.a)(n)),Object(C.a)(n,"fetchedMarkets",ee,Object(j.a)(n)),n.lsExchangeIns=null,n.lsLatestMarketSet=function(e){n.lsExchange.lsSet("latestMarketSymbol",e.spec.symbol)},n.lsLatestMarketSymbolGet=function(){return n.lsExchange.lsGet("latestMarketSymbol")},n.lsLatestMarketGet=function(){var e=n.lsLatestMarketSymbolGet();return n.marketsMap.get(e)},Object(x.when)((function(){return n.marketsMap.size>0}),(function(){n.store.uiStates.market=n.lsLatestMarketGet()})),n}return Object(k.a)(t,e),Object(E.a)(t,[{key:"updateRes",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t,a,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loadingStart(),this.fetchedMarkets){e.next=7;break}return e.next=4,this.ccxtIns.fetchMarkets();case 4:t=e.sent,this.fetchedMarkets=!0,Object(x.runInAction)((function(){t.forEach((function(e){var t=new je(n.store,n,e);n.marketsMap.set(e.symbol,t)}))}));case 7:return e.next=9,this.ccxtIns.fetchTickers();case 9:a=e.sent,Object(x.runInAction)((function(){z.a.each(a,(function(e){var t=n.marketsMap.get(e.symbol);t&&(t.lastTicker=e)}))})),this.loadingEnd();case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMarketsByCoinSymbol",value:function(e){return this.allMarkets.filter((function(t){return t.spec.base===e}))}},{key:"getMarketsByCoinSymbolFilterActive",value:function(e){return this.allMarkets.filter((function(t){return t.spec.base===e}))}},{key:"createCCXTIns",value:function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new window.ccxt[this.exchange](this.createCCXTOption);case 2:this.ccxtIns=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getQuoteValue",value:function(e){return this.getMarketsByCoinSymbolFilterActive(e.base).filter((function(t){return t.lastPrice&&t.spec.base===e.base})).map((function(t){return{symbol:t.spec.symbol,quote:t.spec.quote,base:e.base,value:e.total*t.lastPrice}}))}},{key:"getSnapShoot",value:function(){var e=Object(I.a)(Object(g.a)(t.prototype),"getSnapShoot",this).call(this);return delete e.ccxtIns,e}},{key:"allMarkets",get:function(){return Array.from(this.marketsMap.values())}},{key:"allEnabledMarkets",get:function(){return this.allMarkets.filter((function(e){return e.spec.active}))}},{key:"lsExchange",get:function(){return this.lsExchangeIns||(this.lsExchangeIns=new Oe(this.store.config.ls,"exchange_".concat(this.exchange))),this.lsExchangeIns}}]),t}(N),Q=Object(S.a)(J.prototype,"ccxtIns",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=Object(S.a)(J.prototype,"exchange",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"bigone3"}}),Y=Object(S.a)(J.prototype,"createCCXTOption",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{urls:{api:{private:"https://b1.run/api/v3/viewer",public:"https://b1.run/api/v3"}}}}}),ee=Object(S.a)(J.prototype,"fetchedMarkets",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(S.a)(J.prototype,"updateRes",[x.action],Object.getOwnPropertyDescriptor(J.prototype,"updateRes"),J.prototype),Object(S.a)(J.prototype,"createCCXTIns",[x.action],Object.getOwnPropertyDescriptor(J.prototype,"createCCXTIns"),J.prototype),Object(S.a)(J.prototype,"allMarkets",[x.computed],Object.getOwnPropertyDescriptor(J.prototype,"allMarkets"),J.prototype),Object(S.a)(J.prototype,"allEnabledMarkets",[x.computed],Object.getOwnPropertyDescriptor(J.prototype,"allEnabledMarkets"),J.prototype),J),Ee=(te=function(e){function t(e,a){var n;Object(v.a)(this,t),(n=Object(y.a)(this,Object(g.a)(t).call(this,e,a))).exchangesMap=x.observable.map({},{name:"exchangesMap"});var r=new ke(n.store,Object(j.a)(n));r.exchange="bigone3",n.exchangesMap.set(r.exchange,r);return z.a.each(["bittrex","basefex","coss","bibox","huobipro","okex3","poloniex","coinbasepro"],(function(e){var t=new ke(n.store,Object(j.a)(n));t.exchange=e,t.createCCXTOption={},n.exchangesMap.set(e,t)})),n}return Object(k.a)(t,e),Object(E.a)(t,[{key:"initExchanges",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t,a,n,r,c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,a=!1,n=void 0,e.prev=3,r=this.all[Symbol.iterator]();case 5:if(t=(c=r.next()).done){e.next=12;break}return o=c.value,e.next=9,o.createCCXTIns();case 9:t=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),a=!0,n=e.t0;case 18:e.prev=18,e.prev=19,t||null==r.return||r.return();case 21:if(e.prev=21,!a){e.next=24;break}throw n;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}}),e,this,[[3,14,18,26],[19,,21,25]])})));return function(){return e.apply(this,arguments)}}()},{key:"all",get:function(){return Array.from(this.exchangesMap.values())}}]),t}(N),Object(S.a)(te.prototype,"all",[x.computed],Object.getOwnPropertyDescriptor(te.prototype,"all"),te.prototype),Object(S.a)(te.prototype,"initExchanges",[x.action],Object.getOwnPropertyDescriptor(te.prototype,"initExchanges"),te.prototype),te),xe=(ae=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return a=Object(y.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r))),Object(C.a)(a,"exchange",ne,Object(j.a)(a)),Object(C.a)(a,"market",re,Object(j.a)(a)),Object(C.a)(a,"account",ce,Object(j.a)(a)),a}return Object(k.a)(t,e),Object(E.a)(t,[{key:"changeExchange",value:function(e){this.exchange=e,this.market=null,this.account=null}},{key:"changeMarket",value:function(e){this.market=e,this.exchange.lsLatestMarketSet(e)}}]),t}(A),ne=Object(S.a)(ae.prototype,"exchange",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=Object(S.a)(ae.prototype,"market",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=Object(S.a)(ae.prototype,"account",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(S.a)(ae.prototype,"changeExchange",[x.action],Object.getOwnPropertyDescriptor(ae.prototype,"changeExchange"),ae.prototype),Object(S.a)(ae.prototype,"changeMarket",[x.action],Object.getOwnPropertyDescriptor(ae.prototype,"changeMarket"),ae.prototype),ae),we=(oe=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(y.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).map=x.observable.map({},{name:"balance"}),a}return Object(k.a)(t,e),Object(E.a)(t,[{key:"updateRes",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingStart(),e.next=3,this.ccxtIns.fetchBalance();case 3:t=e.sent,z.a.each(t,(function(e,t){e.base=t})),delete t.info,this.map.merge(t),this.loadingEnd();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllBalanceValue",value:function(e){var t=this.parent.exchange,a=0;return this.balancesNotZero.forEach((function(n){n.base===e?a+=n.total:t.getQuoteValue(n).filter((function(t){return t.quote===e})).forEach((function(e){a+=e.value}))})),a}},{key:"ccxtIns",get:function(){return this.parent.ccxtIns}},{key:"balancesAll",get:function(){var e=Array.from(this.map.values());return e=z.a.orderBy(e,["total"],["desc"])}},{key:"balancesNotZero",get:function(){return this.balancesAll.filter((function(e){return e.total>1e-4}))}}]),t}(N),Object(S.a)(oe.prototype,"updateRes",[x.action],Object.getOwnPropertyDescriptor(oe.prototype,"updateRes"),oe.prototype),Object(S.a)(oe.prototype,"balancesAll",[x.computed],Object.getOwnPropertyDescriptor(oe.prototype,"balancesAll"),oe.prototype),Object(S.a)(oe.prototype,"balancesNotZero",[x.computed],Object.getOwnPropertyDescriptor(oe.prototype,"balancesNotZero"),oe.prototype),oe),Ce=(ie=function(e){function t(e,a,n){var r;return Object(v.a)(this,t),(r=Object(y.a)(this,Object(g.a)(t).call(this,e,a))).map=x.observable.map({},{name:"orderMap"}),Object(C.a)(r,"market",se,Object(j.a)(r)),Object(C.a)(r,"latestClosedOrder",le,Object(j.a)(r)),r.lsLatestClosedOrders=new Oe(r.store.config.ls,"LatestClosedOrders"),r.lsGetOrderKey=function(){return"".concat(r.market.parent.exchange,"-").concat(r.parent.name,"-").concat(r.market.spec.symbol)},r.lsLatestClosedOrdersSet=function(e){var t=r.lsLatestClosedOrders.lsGet("orders",{}),a=r.lsGetOrderKey(),n={marketSymbol:r.market.spec.symbol,orderId:e.id,account:r.parent.name};t[a]=n,r.lsLatestClosedOrders.lsSet("orders",t)},r.lsLatestClosedOrdersDelete=function(){var e=r.lsLatestClosedOrders.lsGet("orders",{});delete e[r.lsGetOrderKey()],r.lsLatestClosedOrders.lsSet("orders",e)},r.createLatestClosedOrderFromLs=function(){var e=r.lsLatestClosedOrders.lsGet("orders",{})[r.lsGetOrderKey()];e&&(r.latestClosedOrder=r.map.get(e.orderId))},r.market=n,r}return Object(k.a)(t,e),Object(E.a)(t,[{key:"updateRes",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t,a,n,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingStart(),t=this.market,a=t.spec.symbol,e.next=5,this.ccxtIns.fetchOrders(a);case 5:n=e.sent,Object(x.runInAction)((function(){n=z.a.orderBy(n,"timestamp",["desc"]);var e=z.a.keyBy(n,"id");r.map.merge(e),r.createLatestClosedOrderFromLs(),r.loadingEnd()}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setLatestClosedOrder",value:function(e){this.latestClosedOrder=e,this.lsLatestClosedOrdersSet(e)}},{key:"ccxtIns",get:function(){return this.parent.ccxtIns}},{key:"all",get:function(){var e=Array.from(this.map.values());return e=z.a.orderBy(e,["timestamp"],["desc"])}},{key:"activeOrders",get:function(){return this.all.filter((function(e){return"open"===e.status}))}},{key:"palOrders",get:function(){var e=this.all;return this.latestClosedOrder&&(e=z.a.take(e,z.a.indexOf(e,this.latestClosedOrder))),e}}]),t}(N),se=Object(S.a)(ie.prototype,"market",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(S.a)(ie.prototype,"all",[x.computed],Object.getOwnPropertyDescriptor(ie.prototype,"all"),ie.prototype),Object(S.a)(ie.prototype,"activeOrders",[x.computed],Object.getOwnPropertyDescriptor(ie.prototype,"activeOrders"),ie.prototype),Object(S.a)(ie.prototype,"updateRes",[x.action],Object.getOwnPropertyDescriptor(ie.prototype,"updateRes"),ie.prototype),le=Object(S.a)(ie.prototype,"latestClosedOrder",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(S.a)(ie.prototype,"palOrders",[x.computed],Object.getOwnPropertyDescriptor(ie.prototype,"palOrders"),ie.prototype),Object(S.a)(ie.prototype,"setLatestClosedOrder",[x.action],Object.getOwnPropertyDescriptor(ie.prototype,"setLatestClosedOrder"),ie.prototype),ie),Se=(ue=function(e){function t(e,a){var n;return Object(v.a)(this,t),n=Object(y.a)(this,Object(g.a)(t).call(this,e,a)),Object(C.a)(n,"ccxtIns",pe,Object(j.a)(n)),Object(C.a)(n,"name",be,Object(j.a)(n)),Object(C.a)(n,"exchange",me,Object(j.a)(n)),Object(C.a)(n,"createCCXTOption",de,Object(j.a)(n)),Object(C.a)(n,"balances",fe,Object(j.a)(n)),n.accountOrdersMap=x.observable.map({},{name:"accountOrdersMap"}),n.balances=new we(e,Object(j.a)(n)),n}return Object(k.a)(t,e),Object(E.a)(t,[{key:"updateRes",value:function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadingStart(),this.loadingEnd();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createCCXTIns",value:function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.exchange=t,a=Object.assign({},t.createCCXTOption,this.createCCXTOption),e.next=4,new window.ccxt[t.exchange](a);case 4:this.ccxtIns=e.sent;case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrUpdateOrdersByMarket",value:function(e){var t=e.spec.symbol,a=this.accountOrdersMap.get(t);return a||(a=new Ce(this.store,this,e),this.accountOrdersMap.set(t,a)),a}},{key:"safeGetAccountOrder",value:function(e){return this.createOrUpdateOrdersByMarket(e)}},{key:"computeOutMoneyByHistory",value:function(e){return e.filter((function(e){return e.filled>0})).reduce((function(e,t){var a=0;return a="limit"===t.type?t.price*t.amount:t.filled,"sell"===t.side&&(a*=-1),e+a}),0)}},{key:"computeCurrentValue",value:function(e){var t=e.lastPrice;return this.balances.map.get(e.spec.base).total*t}},{key:"computeProfitAndRateByMarketPrice",value:function(e){var t=this.safeGetAccountOrder(e),a=this.computeOutMoneyByHistory(t.palOrders),n=this.computeCurrentValue(e);return{profit:n-a,rate:(n-a)/a}}},{key:"computeOrderBookValue",value:function(e){for(var t=this.balances.map.get(e.spec.base).total,a=e.orderBook.bids,n=0,r=0,c=0;c<a.length;c++){var o=a[c];if(!((r+=o.size)<t)){n+=(t-(r-o.size))*o.price;break}n+=o.size*o.price}return n}},{key:"computeProfitAndRateByOrderBook",value:function(e){var t=this.safeGetAccountOrder(e),a=this.computeOrderBookValue(e),n=this.computeOutMoneyByHistory(t.palOrders);return{profit:a-n,rate:(a-n)/n}}},{key:"getSnapShoot",value:function(){var e=Object(I.a)(Object(g.a)(t.prototype),"getSnapShoot",this).call(this);return delete e.ccxtIns,delete this.exchange,e}}]),t}(N),pe=Object(S.a)(ue.prototype,"ccxtIns",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=Object(S.a)(ue.prototype,"name",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"bigone3"}}),me=Object(S.a)(ue.prototype,"exchange",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=Object(S.a)(ue.prototype,"createCCXTOption",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Object(S.a)(ue.prototype,"updateRes",[x.action],Object.getOwnPropertyDescriptor(ue.prototype,"updateRes"),ue.prototype),Object(S.a)(ue.prototype,"createCCXTIns",[x.action],Object.getOwnPropertyDescriptor(ue.prototype,"createCCXTIns"),ue.prototype),fe=Object(S.a)(ue.prototype,"balances",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(S.a)(ue.prototype,"createOrUpdateOrdersByMarket",[x.action],Object.getOwnPropertyDescriptor(ue.prototype,"createOrUpdateOrdersByMarket"),ue.prototype),ue),Ae=(he=function(e){function t(e,a){var n;return Object(v.a)(this,t),(n=Object(y.a)(this,Object(g.a)(t).call(this,e,a))).accountsMap=x.observable.map({},{name:"accountsMap"}),n.lsAccounts=new Oe(n.store.config.ls,"accounts"),n.lsAccountsAdd=function(e,t,a){var r=n.lsAccounts.lsGet("list",[]);r.find((function(e){return e.name===t.name}))?console.warn("\u5df2\u7ecf\u5b58\u5728",e,t):r.push(Object.assign({},{exchangeKey:e,name:t.name,cctxOption:a})),n.lsAccounts.lsSet("list",r)},n.lsAccountsRemove=function(e){var t=n.lsAccounts.lsGet("list",[]);z.a.remove(t,(function(t){return t.name===e})),n.accountsMap.delete(e),n.lsAccounts.lsSet("list",t)},n.lsAccountsGetAllAccounts=function(){return n.lsAccounts.lsGet("list",[])},n.createAccountsFromLs=Object(h.a)(f.a.mark((function e(){var t,a,r,c,o,i,s,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.lsAccountsGetAllAccounts(),a=!0,r=!1,c=void 0,e.prev=4,o=t[Symbol.iterator]();case 6:if(a=(i=o.next()).done){e.next=15;break}if(s=i.value,!(l=n.store.exchanges.exchangesMap.get(s.exchangeKey))){e.next=12;break}return e.next=12,n.createAccount(l,s.name,s.cctxOption);case 12:a=!0,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),r=!0,c=e.t0;case 21:e.prev=21,e.prev=22,a||null==o.return||o.return();case 24:if(e.prev=24,!r){e.next=27;break}throw c;case 27:return e.finish(24);case 28:return e.finish(21);case 29:case"end":return e.stop()}}),e,null,[[4,17,21,29],[22,,24,28]])}))),n.lsLatestAccountKey=function(e){return"".concat(e.exchange)},n.lsLatestAccountSet=function(e){var t=n.lsAccounts.lsGet("LatestAccountMap",{}),a=n.lsLatestAccountKey(e.exchange),r={accountName:e.name,exchangeName:e.exchange.exchange};t[a]=r,n.lsAccounts.lsSet("LatestAccountMap",t)},n.lsLatestAccountGetFromExchange=function(e){var t=n.lsAccounts.lsGet("LatestAccountMap",{})[n.lsLatestAccountKey(e)];return t?n.accountsMap.get(t.accountName):null},n.createAccountsFromLs(),n}return Object(k.a)(t,e),Object(E.a)(t,[{key:"createAccount",value:function(){var e=Object(h.a)(f.a.mark((function e(t,a,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.accountsMap.get(a)){e.next=4;break}console.warn("\u5df2\u7ecf\u5b58\u5728\u6b64\u8d26\u6237\uff0c\u4e0d\u80fd\u91cd\u590d\u6dfb\u52a0",a),e.next=11;break;case 4:return(r=new Se(this.store,this)).name=a,r.createCCXTOption=Object.assign(r.createCCXTOption,n),e.next=9,r.createCCXTIns(t);case 9:return this.accountsMap.set(a,r),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"createAccountAndSaveLs",value:function(){var e=Object(h.a)(f.a.mark((function e(t,a,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createAccount(t,a,n);case 2:(r=e.sent)&&this.lsAccountsAdd(t.exchange,r,n);case 4:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"all",get:function(){return Array.from(this.accountsMap.values())}}]),t}(N),Object(S.a)(he.prototype,"all",[x.computed],Object.getOwnPropertyDescriptor(he.prototype,"all"),he.prototype),Object(S.a)(he.prototype,"createAccount",[x.action],Object.getOwnPropertyDescriptor(he.prototype,"createAccount"),he.prototype),Object(S.a)(he.prototype,"createAccountAndSaveLs",[x.action],Object.getOwnPropertyDescriptor(he.prototype,"createAccountAndSaveLs"),he.prototype),he);window.patch_bigone3(),window.patch_basefex();var Te=function(e){function t(){var e;return Object(v.a)(this,t),(e=Object(y.a)(this,Object(g.a)(t).call(this,null,null))).name="root store",e.config=void 0,e.exchanges=void 0,e.accounts=void 0,e.uiStates=void 0,e.config=new M(Object(j.a)(e),Object(j.a)(e)),e.exchanges=new Ee(Object(j.a)(e),Object(j.a)(e)),e.accounts=new Ae(Object(j.a)(e),Object(j.a)(e)),e.uiStates=new xe(Object(j.a)(e),Object(j.a)(e)),e}return Object(k.a)(t,e),t}(w),Me=p.a.createContext(null);function Ie(){return Object(u.useContext)(Me)}window.mobx=x;var Ne=a(83),Re=a(62),Be=(a(232),a(10)),ze=(a(470),a(74)),Pe=(a(235),a(94)),Le=Pe.a.Header,De=Pe.a.Footer,Ge=Pe.a.Content,Ke=function(e){return p.a.createElement(Pe.a,null,p.a.createElement(Ue,null),p.a.createElement(Ge,{style:{minHeight:"90vh"}},e.children),p.a.createElement(De,null,"Footer"))},Ue=Object(Be.b)((function(){var e=Ie().uiStates,t=Object(Re.g)();return p.a.createElement(Le,{className:"appHeader"},p.a.createElement(ze.a,{theme:"light",mode:"horizontal",defaultSelectedKeys:["exchanges"],style:{lineHeight:"64px"}},p.a.createElement(ze.a.Item,{key:"exchanges",onClick:function(){t.push("/")}},"Exchanges"),p.a.createElement(ze.a.Item,{key:"exchange",onClick:function(){var a=e.exchange?e.exchange.exchange:"";t.push("/exchange/".concat(a))}},"Exchange")))})),He=(a(171),a(6)),Ve=(a(69),a(32)),Fe=(a(469),a(204)),qe=a(475),Xe=a(474),_e=a(208);function Ze(e){var t=e.columns.map((function(e){if(e.title=e.title||z.a.capitalize(e.dataIndex),e.key=e.key||e.dataIndex,e.width=e.width||200,e.render){var t=e.render;e.render=function(a,n,r){return p.a.createElement(We,{r:function(){var a=n[e.dataIndex];return t(a,n,r)}})}}else e.render=function(t,a){return p.a.createElement(We,{r:function(){return a[e.dataIndex]}})};return e}));return p.a.createElement(Fe.a,Object.assign({},e,{columns:t}))}function We(e){return p.a.createElement(Be.a,{render:e.r})}Object(Be.b)((function(e){var t=e.val,a=e.market,n=8;"USDT"===a.quote&&(n=2);var r=z.a.ceil(t,n);return p.a.createElement("span",null,r," ",a.quote)}));var Je=Object(Be.b)((function(e){var t=e.val,a=e.len,n=void 0===a?4:a,r=z.a.ceil(100*t,n);return p.a.createElement("span",null,r," %")})),Qe=function(e){var t=e.val,a="yyyy-MM-dd HH:mm:ss";return Object(qe.a)(t)&&(a="HH:mm:ss"),Object(Xe.a)(t,a)},$e=function(e){return p.a.createElement(Ve.a,{type:"primary",shape:"circle",icon:"sync",onClick:e.onClick,loading:e.loading})},Ye=Object(Be.b)((function(e){var t=e.time;return z.a.isDate(e.time)?p.a.createElement(_e.a,{datetime:e.time,locale:"en_US"}):t})),et=Object(Be.b)((function(e){var t=e.tick,a=p.a.createElement(He.a,{type:"arrow-up"});switch(t){case l.plusTick:a=p.a.createElement(He.a,{type:"arrow-up"});break;case l.zeroPlusTick:a=p.a.createElement(He.a,{type:"caret-up"});break;case l.minusTick:a=p.a.createElement(He.a,{type:"arrow-down"});break;case l.zeroMinusTick:a=p.a.createElement(He.a,{type:"caret-down"})}return p.a.createElement("div",{className:"icon ".concat(t)},a)})),tt=Object(Be.b)((function(e){var t=e.fixed,a=e.num,n=function(e){if(e.indexOf(".")>0){return[e,""]}return[e]}(accounting.toFixed(a,t)),r=Object(O.a)(n,2),c=r[0],o=r[1],i=void 0===o?"":o;return p.a.createElement("span",{className:"Nf"},c,p.a.createElement("span",{className:"invalidSection"},i))})),at=Object(Be.b)((function(e){var t=e.val,a=e.spec,n=e.withUnit,r=void 0!==n&&n,c=a.precision.base||a.precision.amount,o=a.quote;return p.a.createElement("span",null,p.a.createElement(tt,{num:t,fixed:c})," ",r&&o)})),nt=Object(Be.b)((function(e){var t=e.val,a=e.spec,n=e.withUnit,r=void 0!==n&&n,c=a.precision.quote||a.precision.price,o=a.quote;return p.a.createElement("span",null,p.a.createElement(tt,{num:t,fixed:c})," ",r&&o)})),rt=(a(378),a(192),a(120)),ct=(a(382),a(2)),ot=a.n(ct),it=Object(Be.b)((function(e){var t=e.updatableRes,a=e.noContentPadding,n=void 0===a||a,r=e.updateImmediately,c=void 0===r||r,o=Object(u.useCallback)(Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.updateRes();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.warn("updatableRes failed",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),[t]);Object(u.useEffect)((function(){c&&o()}),[]);var i=z.a.omit(e,["updatableRes","noContentPadding","updateImmediately"]);return p.a.createElement(rt.a,Object.assign({},i,{title:p.a.createElement("div",{className:"titleWithUpdateTime"},p.a.createElement("div",null,e.title),p.a.createElement("div",{className:"updateTime"},p.a.createElement(Ye,{time:t.lastUpdateTime}))),className:ot()("UpdatableCard",{noContentPadding:n},i.className),size:"small",extra:p.a.createElement("div",null,p.a.createElement($e,{onClick:function(){o()},loading:t.loading}))}),i.children)})),st=Object(Be.b)((function(e){var t=Ie().exchanges,a=t.all;return p.a.createElement("div",{className:"Exchanges",style:{padding:24}},p.a.createElement(it,{title:p.a.createElement("div",null,"Exchanges"),updatableRes:t},p.a.createElement(Ze,{size:"small",dataSource:a,rowKey:"exchange",columns:[{title:"Id",dataIndex:"exchange",render:function(e,t){return p.a.createElement("div",null,p.a.createElement(Ne.b,{to:"/exchange/".concat(t.exchange)},e))}}]})))})),lt=Object(Be.b)((function(){return p.a.createElement(Ke,null,p.a.createElement(st,null))})),ut=(a(138),a(65)),pt=(a(387),a(388),a(389),a(109),a(49)),bt=(a(390),a(118)),mt=a.n(bt),dt=a(205),ft=Object(Be.b)((function(e){var t=Object(u.useRef)(null),a=e.minWidth,n=void 0===a?10:a,r=Object(Be.c)((function(){return{width:10,height:10,setWH:z.a.debounce((function(e,t){e&&(r.width=e),t&&(r.height=t),r.parentResizing=!1}),300),parentResizing:!1}}));Object(u.useEffect)((function(){var e=t.current.parentElement.parentElement.parentElement,a=new dt.a((function(e){var t=e[0],a=t.contentRect.width,n=t.contentRect.height;r.parentResizing=!0,r.setWH(a,n)}));return a.observe(e),function(){a.disconnect()}}),[]);var c=r.width>n?r.width:n;return p.a.createElement(mt.a,{style:{maxHeight:r.height,width:c},className:"AutoSizeScrollBar",renderThumbVertical:function(){return p.a.createElement("div",{className:"ThumbStyle"})},renderThumbHorizontal:function(){return p.a.createElement("div",{className:"ThumbStyle"})}},p.a.createElement("div",{ref:t,style:{width:"100%",height:"100%",display:r.parentResizing?"none":"block"}},e.children))})),ht=pt.a.TabPane,Ot=Object(Be.b)((function(e){var t=e.exchange,a=Ie().uiStates,n=Object(Be.c)((function(){return{get quotes(){var e=new Set;return t.allMarkets.forEach((function(t){e.add(t.spec.quote)})),Array.from(e)}}}));return p.a.createElement(it,{title:"Markets",className:"Markets",updatableRes:t,updateImmediately:!1},p.a.createElement(pt.a,{defaultActiveKey:"1",onChange:function(){}},function(){var e=a.account;if(e){var t=e.balances.balancesNotZero,n=e.exchange.allMarkets,r=(Array.from(new Set(n.map((function(e){return e.spec.quote})))),t.map((function(e){return e.base}))),c=n.filter((function(e){return r.includes(e.spec.quote)&&r.includes(e.spec.base)}));return p.a.createElement(ht,{tab:p.a.createElement(He.a,{type:"bank"}),key:e.name},p.a.createElement(vt,{markets:c}))}return null}(),n.quotes.map((function(e){var a=t.allMarkets.filter((function(t){return t.spec.active&&t.spec.quote===e}));return p.a.createElement(ht,{tab:e,key:e},p.a.createElement(vt,{markets:a}))}))))})),vt=Object(Be.b)((function(e){var t=e.markets,a=Ie().uiStates;return p.a.createElement("div",{style:{height:"100%"}},p.a.createElement(ft,{minWidth:300},p.a.createElement("div",{className:"MarketsList"},t.map((function(e){return p.a.createElement("div",{key:e.spec.symbol,className:"MarketsListItem",onClick:function(){a.changeMarket(e)}},p.a.createElement("div",{className:"exchangeName"},e.spec.symbol),p.a.createElement("div",{className:"latestPrice"},e.lastTicker&&p.a.createElement(nt,{val:e.lastTicker.close,spec:e.spec})))})))))})),yt=a(155),gt=a.n(yt),jt=(a(410),Object(Be.b)((function(e){var t=e.market,a=t.recentTrades,n=a.trades;return p.a.createElement(it,{title:"Recent Trades",className:"RecentTrades",updatableRes:a},p.a.createElement(ft,null,p.a.createElement("div",{className:"TradeHistoryContainer"},n.map((function(e){return p.a.createElement(kt,{key:e.id,trade:e,market:t})})))))}))),kt=Object(Be.b)((function(e){var t=e.trade,a=e.market;return p.a.createElement("div",{className:"TradeHistoryContainer_item new"},p.a.createElement("div",{className:"volume"},p.a.createElement(at,{val:t.amount,spec:a.spec})),p.a.createElement("div",{className:"price ".concat(t.side)},p.a.createElement(et,{tick:t.tick}),p.a.createElement(nt,{val:t.price,spec:a.spec})),p.a.createElement("div",{className:"time"},p.a.createElement(Qe,{val:t.timestamp})))})),Et=(a(411),a(473)),xt=Object(Be.b)((function(e){var t=e.market,a=t.orderBook,n=Object(Et.a)(),r=Object(O.a)(n,2),c=r[0],o=r[1],i=Object(Be.c)((function(){return{showNum:14,side:s.both,get asks(){return(i.side===s.both?z.a.take(a.asks,i.showNum):a.asks).reverse()},get bids(){return i.side===s.both?z.a.take(a.bids,i.showNum):a.bids},setSide:function(e){i.side=e},setShowNum:z.a.throttle((function(e){i.showNum=e}),500)}}));Object(u.useEffect)((function(){i.setShowNum(Math.floor(o.height/40))}),[o.height]);var l=i.asks,b=i.bids,m=function(e,a){return p.a.createElement("div",{className:a},e.map((function(e,a){return p.a.createElement(wt,{key:e.price,item:e,market:t})})))};return p.a.createElement(it,{title:"OrderBook",className:"OrderBook",updatableRes:a},p.a.createElement("div",{style:{height:"100%"}},p.a.createElement("div",{className:"OrderBookContainer"},p.a.createElement("div",{className:"OrderBookInnerHeader"},p.a.createElement("div",{className:"sideBtns"},p.a.createElement(Ve.a,{size:"small",icon:"vertical-align-middle",onClick:function(){return i.setSide(s.both)}}),p.a.createElement(Ve.a,{size:"small",icon:"vertical-align-top",onClick:function(){return i.setSide(s.buy)}}),p.a.createElement(Ve.a,{size:"small",icon:"vertical-align-bottom",onClick:function(){return i.setSide(s.sell)}}))),i.side===s.both?p.a.createElement("div",{ref:c,className:"centeredContent"},m(l,"asks"),p.a.createElement("div",{className:"MarketPrice"},p.a.createElement(Ct,{market:t})),m(b,"bids")):p.a.createElement("div",{className:"sideContent"},p.a.createElement("div",{className:"MarketPrice"},p.a.createElement(Ct,{market:t})),p.a.createElement("div",{className:"sideContentList"},p.a.createElement(ft,null,i.side===s.buy&&m(l,"asks"),i.side===s.sell&&m(b,"bids")))))))})),wt=Object(Be.b)((function(e){var t=e.item,a=e.market;return p.a.createElement("div",{className:"OrderBookItem"},p.a.createElement("div",{className:"price"},p.a.createElement(nt,{val:t.price,spec:a.spec})),p.a.createElement(St,{className:"size",updateDep:t.size},p.a.createElement(at,{val:t.size,spec:a.spec})),p.a.createElement("div",{className:"accumulateSize"},p.a.createElement(at,{val:t.accumulateSize,spec:a.spec})))})),Ct=Object(Be.b)((function(e){var t=e.market;return p.a.createElement("div",null," ",p.a.createElement(nt,{val:t.lastPrice,spec:t.spec}))})),St=function(e){var t=e.className,a=e.children,n=e.updateDep,r=e.highLightImmediate,c=Object(u.useRef)(null),o=Object(u.useState)((function(){return{resetAnim:function(){var e=c.current;e.classList.remove("new"),e.offsetWidth,e.classList.add("new")}}})),i=Object(O.a)(o,2),s=i[0],l=(i[1],Object(u.useState)((function(){return{onUpdateFunction:function(){}}}))),b=Object(O.a)(l,1)[0];return Object(u.useEffect)((function(){b.onUpdateFunction()}),[n]),Object(u.useEffect)((function(){r&&s.resetAnim(),b.onUpdateFunction=s.resetAnim}),[]),p.a.createElement("div",{ref:c,className:"".concat(t," highLight")},a)},At=(a(412),a(206)),Tt=(a(414),a(122)),Mt=(a(416),a(86)),It=(a(418),a(210)),Nt=(a(420),pt.a.TabPane,Object(Be.b)((function(e){var t=e.exchange,a=Ie(),n=a.accounts,r=a.uiStates,c=Object(u.useRef)(null),o=Object(Be.c)((function(){return{visible:!1,addAccount:function(e,a){n.createAccountAndSaveLs(t,e,a).then((function(){console.log("\u6dfb\u52a0\u6210\u529f"),o.visible=!1}))},handleCreate:function(){c.current.props.form.validateFields((function(e,t){e||(console.log("Received values of form: ",t),o.addAccount(t.name,{apiKey:t.apiKey,secret:t.secret}))}))},activeAccount:function(e){r.account=e,n.lsLatestAccountSet(e)}}}));Object(u.useEffect)((function(){var e=n.lsLatestAccountGetFromExchange(t);e&&o.activeAccount(e)}),[]);var i=n.all.filter((function(e){return e.exchange===t}));return p.a.createElement(it,{title:p.a.createElement("div",null,"Accounts in:",t.exchange),updatableRes:n},p.a.createElement("div",{style:{padding:12}},p.a.createElement(Ve.a,{type:"primary",onClick:function(){o.visible=!0}},"add")),p.a.createElement(Rt,{wrappedComponentRef:c,visible:o.visible,onCancel:function(){o.visible=!1},onCreate:function(){o.handleCreate()}}),p.a.createElement(Ze,{size:"small",dataSource:i,rowKey:function(e){return e.name},columns:[{dataIndex:"name",render:function(e,t){return p.a.createElement(It.a,{color:"gold",onClick:function(){o.activeAccount(t)}},t.name)}},{dataIndex:"action",render:function(e,t){return p.a.createElement("div",null,p.a.createElement(Ve.a,{type:"danger",size:"small",onClick:function(){n.lsAccountsRemove(t.name)}},"delete"))}}]}),r.account&&p.a.createElement(zt,{key:r.account.name,account:r.account}))}))),Rt=Mt.a.create({name:"AccountCreateForm"})(function(e){function t(){return Object(v.a)(this,t),Object(y.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props;e.visible,e.onCancel,e.onCreate,e.form.getFieldDecorator;return p.a.createElement(Bt,this.props)}}]),t}(p.a.Component));function Bt(e){var t=e.visible,a=e.onCancel,n=e.onCreate,r=e.form.getFieldDecorator;return p.a.createElement(At.a,{visible:t,title:"Create An Account",okText:"Create",onCancel:a,onOk:n},p.a.createElement(Mt.a,{layout:"vertical"},p.a.createElement(Mt.a.Item,{label:"name"},r("name",{rules:[{required:!0}]})(p.a.createElement(Tt.a,null))),p.a.createElement(Mt.a.Item,{label:"apiKey"},r("apiKey",{rules:[{required:!0}]})(p.a.createElement(Tt.a,null))),p.a.createElement(Mt.a.Item,{label:"secret"},r("secret",{rules:[{required:!0}]})(p.a.createElement(Tt.a,null)))))}var zt=Object(Be.b)((function(e){var t=e.account,a=(Ie().uiStates,t.balances.balancesNotZero);return p.a.createElement("div",{className:"UserAsset"},p.a.createElement(it,{title:p.a.createElement("div",null,"Balances"),updatableRes:t.balances},p.a.createElement("h4",null,"USDT Value : ",t.balances.getAllBalanceValue("USDT")),p.a.createElement(Ze,{size:"small",dataSource:a,rowKey:"base",columns:[{dataIndex:"base",render:function(e,a){var n=a.base;t.exchange.getMarketsByCoinSymbol(n).every((function(e){return e.loading}));return p.a.createElement("div",null,a.base," ")}},{dataIndex:"total"}]})))})),Pt=(a(462),a(207)),Lt=(a(464),a(96)),Dt=(a(466),Object(Be.b)((function(e){var t=e.market,a=e.account,n=a.balances,r=n.map.get(t.spec.base);if(!n||!r)return null;var c=a.safeGetAccountOrder(t),o=a.computeProfitAndRateByMarketPrice(t),i=a.computeProfitAndRateByOrderBook(t);return p.a.createElement(it,{title:p.a.createElement("div",null,a.name,"-",p.a.createElement(We,{r:function(){return t.spec.symbol}})),className:"BalanceCard",updatableRes:t},p.a.createElement(mt.a,{style:{height:400},autoHide:!0},p.a.createElement("div",{className:"BalanceCardContainer"},p.a.createElement(Gt,{balance:r}),p.a.createElement("div",{className:"ProfitSection"},p.a.createElement("h3",null,"Profit (By Latest price = Market Price)"),p.a.createElement("div",null,p.a.createElement(nt,{val:o.profit,spec:t.spec,withUnit:!0}),"/ ",p.a.createElement(Je,{val:o.rate})),p.a.createElement("h3",null,"Profit (By OrderBook )"),p.a.createElement("div",null,p.a.createElement(nt,{val:i.profit,spec:t.spec,withUnit:!0}),"/ ",p.a.createElement(Je,{val:i.rate})),p.a.createElement("div",{className:"profitRow2"},p.a.createElement("div",null,p.a.createElement(Lt.a,{color:"red",text:"Cost"}),p.a.createElement(nt,{val:a.computeOutMoneyByHistory(c.all),spec:t.spec,withUnit:!0})),p.a.createElement("div",null,p.a.createElement(Lt.a,{color:"green",text:"Current Value"}),p.a.createElement(nt,{val:a.computeCurrentValue(t),spec:t.spec,withUnit:!0})),p.a.createElement("div",null,p.a.createElement(Lt.a,{color:"green",text:"OrderBook Value"}),p.a.createElement(nt,{val:a.computeOrderBookValue(t),spec:t.spec,withUnit:!0})))))))}))),Gt=Object(Be.b)((function(e){var t=e.balance,a=t.used/t.total*100,n=t.free/t.total*100,r=function(e,a,n,r){return p.a.createElement("div",{className:"BalanceItemRow"},p.a.createElement(Pt.a,{percent:a,size:"small",showInfo:!1}),p.a.createElement("div",{className:"BalanceItemRowDown"},p.a.createElement(Lt.a,{status:"success",text:n}),p.a.createElement("div",{className:"BalanceItemRowText"},t.total)))};return p.a.createElement("div",{className:"BalanceItem"},r(0,100,"Total",t.total),r(0,n,"Free",t.free),r(0,a,"Used",t.used))})),Kt=(a(467),pt.a.TabPane),Ut=Object(Be.b)((function(e){var t=e.account,a=e.market,n=t.safeGetAccountOrder(a),r=Object(Be.c)((function(){return{activeTab:"active"}}));if(!n)return null;var c=function(e){return p.a.createElement(Ze,{size:"small",dataSource:e,rowKey:"id",columns:[{dataIndex:"symbol",render:function(e,t){var a=t===n.latestClosedOrder;return p.a.createElement("span",null,e,!a&&p.a.createElement(Ve.a,{size:"small",onClick:function(){n.setLatestClosedOrder(t)}},"latest order"))}},{dataIndex:"timestamp",render:function(e){return p.a.createElement(Qe,{val:e})}},{dataIndex:"side"},{dataIndex:"type"},{dataIndex:"status"},{dataIndex:"amount"},{dataIndex:"cost"},{dataIndex:"price"},{dataIndex:"filled"},{dataIndex:"remaining"}]})};return p.a.createElement(it,{title:p.a.createElement("div",null,"Orders ",p.a.createElement(We,{r:function(){return a.spec.symbol}})),className:"UserOrders",updatableRes:n},p.a.createElement("div",{className:"UserOrdersContainer"},p.a.createElement(pt.a,{defaultActiveKey:"all",onChange:function(e){r.activeTab=e}},p.a.createElement(Kt,{tab:"Active",key:"active"},c(n.activeOrders)),p.a.createElement(Kt,{tab:"All",key:"all"},c(n.all)))))})),Ht=Object(yt.WidthProvider)(gt.a),Vt=Object(Be.b)((function(e){var t=Ie(),a=Object(u.useRef)(null),n=Object(Be.c)((function(){var e=new Oe(t.config.ls,"AppGridContainer");return{gridLayout:e.lsGet("layout",Ft),getCurrentLayout:function(){return Object(x.toJS)(n.gridLayout)},onLayoutChange:z.a.debounce((function(t){e.lsSet("layout",t)}),1e3)}})),r={MarketsView:p.a.createElement(qt,null),OrderBook:p.a.createElement(Zt,null),RecentTrades:p.a.createElement(_t,null),AccountsView:p.a.createElement(Wt,null),CurrentBalance:p.a.createElement(Jt,null),AccountOrders:p.a.createElement(Qt,null)},c=n.getCurrentLayout();return p.a.createElement("div",{className:"AppGridContainer",ref:a},p.a.createElement(Ht,{className:"GridLayoutLayout",layout:c,onLayoutChange:n.onLayoutChange,cols:20,rowHeight:24,margin:[2,2],draggableHandle:".ant-card-head",draggableCancel:".ant-card-body"},c.map((function(e){return p.a.createElement("div",{key:e.i},function(e){var t=r[e];return t||(t=p.a.createElement("div",null,"nothing")),t}(e.i))}))))})),Ft=[{w:6,h:15,x:0,y:62,i:"xxx",moved:!1,static:!1},{w:6,h:21,x:0,y:0,i:"MarketsView",moved:!1,static:!1},{w:6,h:21,x:6,y:0,i:"OrderBook",moved:!1,static:!1},{w:6,h:21,x:12,y:0,i:"RecentTrades",moved:!1,static:!1},{w:6,h:22,x:0,y:21,i:"AccountsView",moved:!1,static:!1},{w:6,h:22,x:6,y:21,i:"CurrentBalance",moved:!1,static:!1},{w:20,h:19,x:0,y:43,i:"AccountOrders",moved:!1,static:!1}],qt=Object(Be.b)((function(){var e=Ie().uiStates.exchange;return p.a.createElement("div",{style:{height:"100%"}},e&&p.a.createElement(Ot,{key:e.exchange,exchange:e}))})),Xt=p.a.createElement("div",null,"Need to select a market"),_t=Object(Be.b)((function(){var e=Ie().uiStates.market;return p.a.createElement("div",{style:{height:"100%"}},e?p.a.createElement(jt,{key:e.spec.symbol,market:e}):Xt)})),Zt=Object(Be.b)((function(e){var t=Ie().uiStates,a=t.market;return p.a.createElement("div",{style:{height:"100%"}},a?p.a.createElement(xt,{key:t.market.spec.symbol,market:t.market}):Xt)})),Wt=Object(Be.b)((function(e){var t=Ie().uiStates.exchange;return p.a.createElement("div",{style:{height:"100%"}},t?p.a.createElement(Nt,{key:t.exchange,exchange:t}):p.a.createElement("div",null,"AccountsView"))})),Jt=Object(Be.b)((function(e){var t=Ie().uiStates,a=(t.exchange,t.market),n=t.account;return p.a.createElement("div",{style:{height:"100%"}},a&&n?p.a.createElement(Dt,{key:n.name+a.spec.symbol,market:a,account:n}):p.a.createElement("div",null,"Balance"))})),Qt=Object(Be.b)((function(e){var t=Ie().uiStates,a=(t.exchange,t.market),n=t.account;return p.a.createElement("div",{style:{height:"100%"}},a&&n?p.a.createElement(Ut,{key:t.market.spec.symbol+t.account.name,account:t.account,market:t.market}):p.a.createElement("div",null,"account order"))})),$t=(Object(Be.b)((function(e){Ie().uiStates.market;return p.a.createElement("div",{style:{height:"100%"}},p.a.createElement(rt.a,{headStyle:{color:"black"},bodyStyle:{color:"black"},size:"small",title:"Small size card",extra:p.a.createElement("a",{href:"#"},"More")},p.a.createElement("div",{style:{display:"flex",background:"red",height:"100%"}},p.a.createElement(ft,null,p.a.createElement("p",null,"Card content"),p.a.createElement("p",null,"Card content"),p.a.createElement("p",null,"Card content"),p.a.createElement("div",{style:{width:500,height:200,background:"#6547ac",border:"8px solid yellow"}},"AAAa")))))})),Object(Be.b)((function(e){e.exchange,Ie().uiStates;return p.a.createElement("div",{className:"TradeMainView"},p.a.createElement(Vt,null))}))),Yt=Object(Be.b)((function(e){var t=e.exchange;Ie().uiStates,t.allMarkets;return p.a.createElement(it,{title:p.a.createElement("div",null,"Exchange - ",t.exchange),updatableRes:t},p.a.createElement($t,{exchange:t}))})),ea=Object(Be.b)((function(){var e=Ie(),t=e.exchanges,a=e.uiStates,n=Object(Re.h)().exchangeKey,r=t.exchangesMap.get(n);return r&&a.changeExchange(r),p.a.createElement(Ke,null,r?p.a.createElement(Yt,{key:r.exchange,exchange:r}):p.a.createElement(ut.a,null))}));function ta(){return p.a.createElement(Ne.a,null,p.a.createElement("div",null,p.a.createElement(Re.d,null,p.a.createElement(Re.b,{exact:!0,path:"/"},p.a.createElement(lt,null)),p.a.createElement(Re.b,{path:"/exchange/:exchangeKey"},p.a.createElement(ea,null)),p.a.createElement(Re.a,{from:"/exchange",to:"/exchange/none"}))))}var aa=window.store=window.ss=new Te,na=function(){var e=Object(u.useState)(!1),t=Object(O.a)(e,2),a=t[0],n=t[1];return Object(u.useEffect)((function(){(function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aa.exchanges.initExchanges();case 2:n(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),p.a.createElement("div",{className:"App"},p.a.createElement(Me.Provider,{value:aa},a&&p.a.createElement(ta,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));m.a.render(p.a.createElement(na,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[214,1,2]]]);
//# sourceMappingURL=main.1c8a4c34.chunk.js.map